{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/xinxin/Documents/HBuilderProjects/mz_mall/pages/cart/cart.vue?f421","webpack:///C:/Users/xinxin/Documents/HBuilderProjects/mz_mall/pages/cart/cart.vue?e99d","webpack:///C:/Users/xinxin/Documents/HBuilderProjects/mz_mall/pages/cart/cart.vue?1c4b","webpack:///C:/Users/xinxin/Documents/HBuilderProjects/mz_mall/pages/cart/cart.vue?fcdc","uni-app:///pages/cart/cart.vue","webpack:///C:/Users/xinxin/Documents/HBuilderProjects/mz_mall/pages/cart/cart.vue?09a5","webpack:///C:/Users/xinxin/Documents/HBuilderProjects/mz_mall/pages/cart/cart.vue?e75d"],"names":["createPage","Page"],"mappings":"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","file":"pages/cart/cart.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/cart/cart.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cart.vue?vue&type=template&id=0f00adf4&\"\nvar renderjs\nimport script from \"./cart.vue?vue&type=script&lang=js&\"\nexport * from \"./cart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cart.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/cart/cart.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=template&id=0f00adf4&\"","var components\ntry {\n  components = {\n    uniSwipeAction: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action\" */ \"@/uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action.vue\"\n      )\n    },\n    uniSwipeActionItem: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item\" */ \"@/uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"cart\">\n    <template v-if=\"!isLogin\">\n      <view class=\"no-login\">\n        <image src=\"../../static/default/empty.png\" mode=\"\"></image>\n        <view>\n          <button type=\"primary\" @click=\"goLogin\">未登录，点击登录</button>\n        </view>\n      </view>\n    </template>\n    <scroll-view scroll-y v-else>\n      <template v-if=\"cartList.length === 0\">\n        <view class=\"no-cart\">\n          <image src=\"../../static/default/empty.png\" mode=\"\"></image>\n          <view>什么都没有？快去挑选喜欢的商品吧！</view>\n        </view>\n      </template>\n      <view class=\"cart-item\" v-for=\"(item, index) in cartList\" :key=\"item.id\">\n        <uni-swipe-action>\n          <!-- 基础用法 -->\n          <uni-swipe-action-item\n            :right-options=\"options\"\n            @click=\"onClick($event, item.id, index)\"\n          >\n            <checkbox-group style=\"width: 60rpx\" @change=\"checked(index)\">\n              <label>\n                <checkbox color=\"#01c2fa\" :checked=\"item.flag\" />\n              </label>\n            </checkbox-group>\n            <view class=\"cart-img\">\n              <image :src=\"baseUrl + item.mainimage\" mode=\"scaleToFill\"></image>\n            </view>\n            <view class=\"item-content\">\n              <view class=\"item-title\">{{ item.title }}</view>\n              <view class=\"item-attrbute\">{{\n                item.attr_0 + \" \" + item.attr_1\n              }}</view>\n              <view class=\"item-total\">\n                <view class=\"item-price\">￥{{ item.price }}</view>\n                <view class=\"item-num\">\n                  <view class=\"sub-num\" @click=\"changeNum(-1, index)\">-</view>\n                  <view class=\"num\">{{ item.num }}</view>\n                  <view class=\"add-num\" @click=\"changeNum(1, index)\">+</view>\n                </view>\n              </view>\n            </view>\n          </uni-swipe-action-item>\n        </uni-swipe-action>\n      </view>\n    </scroll-view>\n    <view class=\"bottom\">\n      <view class=\"bottom-bar\">\n        <view>\n          <checkbox-group @change=\"isAllChecked\">\n            <label>\n              <checkbox :checked=\"allChecked\"\n                ><text style=\"color: #999\">全选</text></checkbox\n              >\n            </label>\n          </checkbox-group>\n        </view>\n        <view class=\"bar-right\"\n          ><view class=\"total\"\n            >总计:<text style=\"color: red\">￥{{ totalPrice }}</text></view\n          >\n          <view class=\"pay\" @click=\"goOrder\">\n            去结算(<text style=\"font-size: 24rpx\">{{ totalNum }}件</text>)\n          </view></view\n        >\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      allChecked: false,\n      isLogin: false,\n      totalNum: 0,\n      totalPrice: 0,\n      cartList: [],\n      options: [\n        {\n          text: \"删除\",\n          style: {\n            backgroundColor: \"red\",\n          },\n        },\n      ],\n      baseUrl : 'https://h.0x07.cn/uploads/'\n    };\n  },\n  methods: {\n    //未登录情况下跳转登录\n    goLogin() {\n      this.router(\"/pages/cart/cart\", 2);\n    },\n    //获取购物车数据\n    async getCartList() {\n      const { data: res } = await this.$request({ url: \"/member/cartlist\" });\n      if (res.code!==1) {\n        return this.cartList = []\n      }\n\t  res.data.forEach((item) => {\n          item.num = parseInt(item.num);\n          item.flag = item.flag === \"1\" ? true : false;\n          item.price = parseFloat(item.price);\n        });\n      this.cartList = res.data;\n    },\n    //点击改变商品数量\n    changeNum(i, index) {\n      let change = i;\n      change = this.cartList[index].num == 1 && change === -1 ? 0 : change;\n      this.cartList[index].num += change;\n      this.total();\n    },\n    //删除购物车操作\n    onClick(e, id, index) {\n      if (e.content.text === \"删除\") {\n        uni.showModal({\n          title: \"提示\",\n          content: \"确定要删除此商品吗？\",\n          success: async (res) => {\n            if (res.confirm) {\n              this.cartList.splice(index, 1);\n              this.total();\n              const { data: res } = await this.$request({\n                url: \"/member/delcart\",\n                params: {\n                  id,\n                },\n              });\n              if (res.code === 1) {\n                uni.showToast({\n                  title: res.msg,\n                  icon: \"none\",\n                });\n                this.getCartList();\n              }\n            }\n          },\n        });\n      }\n    },\n    //全选按钮\n    isAllChecked() {\n      this.allChecked = !this.allChecked;\n      this.cartList.forEach((item) => {\n        item.flag = this.allChecked;\n      });\n      this.total();\n    },\n    //单选按钮\n    checked(index) {\n      this.cartList[index].flag = !this.cartList[index].flag;\n      this.allChecked = this.cartList.every((v) => v.flag === true);\n      this.total();\n    },\n    //计算总价 总数量\n    total() {\n      let totalNum = 0;\n      let totalPrice = 0;\n      this.cartList.forEach(async (v) => {\n        if (v.flag) {\n          totalNum += v.num;\n          totalPrice += v.price * v.num;\n        }\n      });\n      this.totalNum = totalNum;\n      this.totalPrice = totalPrice.toFixed(2);\n    },\n    //点击去结算\n    goOrder(){\n      let arr = []\n      this.cartList.forEach((item,index)=>{\n        arr[index]={attrid:item.attrid,num:item.num}\n      })\n       uni.setStorageSync('orderShop', JSON.stringify(arr))\n      this.router('/pages/order/order')\n    }\n  },\n  async onShow() {\n    //判断是否登录\n    if (uni.getStorageSync(\"token\")) {\n      this.isLogin = true;\n    } else {\n      this.isLogin = false;\n    }\n    //获取购物车列表数据\n    await this.getCartList();\n    //计算总计\n    this.total();\n  },\n  //离开页面保存购物车数据\n  onHide() {\n    let arr = [];\n    this.cartList.forEach((item, index) => {\n      arr[index] = {\n        attrid: item.attrid,\n        num: item.num,\n        flag: item.flag,\n      };\n    });\n    this.$request({\n      url: \"/member/savecart\",\n      params: {\n        data: JSON.stringify(arr),\n      },\n    })\n  },\n};\n</script>\n\n<style>\n.cart {\n  width: 100%;\n  border-top: 1px solid #e5e5e5;\n  padding: 20rpx 20rpx 106rpx 20rpx;\n}\n.cart-item {\n  display: flex;\n  width: 100%;\n  height: 265rpx;\n  padding: 30rpx 0;\n  border-bottom: 1px solid #e5e5e5;\n  align-items: center;\n}\n.cart-img {\n  width: 200rpx;\n  height: 200rpx;\n  font-size: 0;\n  display: flex;\n  align-items: center;\n}\n.cart-img image {\n  width: 200rpx;\n  height: 200rpx;\n}\n.item-content {\n  width: 100%;\n  height: 100%;\n}\n.item-title {\n  display: -webkit-box;\n  overflow: hidden;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n}\n.item-attrbute {\n  color: #999;\n}\n.item-total {\n  height: 80rpx;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.item-price {\n  color: #e20307;\n  font-size: 36rpx;\n}\n.item-num {\n  height: 50rpx;\n  width: 155rpx;\n  border: 1px solid #e5e5e5;\n  display: flex;\n}\n.item-num > view {\n  line-height: 50rpx;\n  text-align: center;\n  width: 70rpx;\n}\n.num {\n  border-right: 1px solid #e5e5e5;\n  border-left: 1px solid #e5e5e5;\n  width: 100rpx !important;\n  text-align: center;\n}\n\n.no-cart {\n  width: 100%;\n  padding-top: 160rpx;\n  text-align: center;\n}\n.no-cart > view {\n  color: #999;\n}\n.no-login {\n  padding-top: 160rpx;\n}\n.no-login view button {\n  height: 80rpx;\n  width: 500rpx;\n  text-align: center;\n  line-height: 80rpx;\n}\n.bottom {\n  position: fixed;\n  bottom: 0;\n  /* #ifdef H5 */\n  bottom: 100rpx;\n  /* #endif */\n  right: 30rpx;\n  left: 30rpx;\n  margin: auto;\n  background-color: #fff;\n}\n.bottom-bar {\n  display: flex;\n  height: 106rpx;\n  align-items: center;\n  justify-content: space-between;\n}\n.bar-right {\n  display: flex;\n  align-items: center;\n}\n.pay {\n  height: 86rpx;\n  background-color: #0bbaef;\n  line-height: 86rpx;\n  width: 240rpx;\n  color: #fff;\n  border-radius: 43rpx;\n  text-align: center;\n  margin-left: 30rpx;\n}\n</style>\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cart.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1629450516972\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}